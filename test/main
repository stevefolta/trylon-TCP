trylon tcp-test

main: args
	listen-socket = nil
	connection-socket = nil
	try
		port = 8080
		listen-socket = TCP Socket new: port
		connection-socket = listen-socket accept

		dialog-on: connection-socket

	else
		send: exception message
	if connection-socket
		connection-socket close
		connection-socket = nil
	if listen-socket
		listen-socket close
		listen-socket = nil


dialog-on: socket
	socket send: "Hello!"

	socket close


